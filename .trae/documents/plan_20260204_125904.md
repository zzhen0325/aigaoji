# Implement Local User System

I will implement a lightweight, local-first user system that runs entirely in the browser using LocalStorage. This ensures data privacy and meets the "machine-bound if not logged in" requirement.

## 1. Data Model & Store Setup
- **Type Definitions**: Add `User` interface (username, password, avatar) to `src/types/index.ts`.
- **User Store**: Create `src/store/userStore.ts` using `zustand`.
  - Manage `currentUser` state.
  - Manage a list of registered `users` (persisted to `localStorage` key `app_users`).
  - Provide actions: `login`, `register` (with duplicate check), `logout`.

## 2. Portfolio Data Segregation
- **Dynamic Storage Keys**: Refactor `src/pages/portfolio/Portfolio.tsx`.
  - **Guest Mode (Not logged in)**: Continue using the existing `portfolio` key in LocalStorage. This fulfills "data bound to machine".
  - **User Mode (Logged in)**: Use `portfolio_${username}` key.
- **Reactive Updates**: Ensure the portfolio view automatically reloads data when the user logs in or out.

## 3. UI Components
- **Auth Modal (`src/components/AuthModal.tsx`)**:
  - A clean dialog with "Login" and "Register" tabs.
  - **Register**: Username, Password, and an Avatar selector (using Emojis for simplicity).
  - **Login**: Username and Password.
- **Layout Integration (`src/components/Layout.tsx`)**:
  - Add a User Profile area in the top navigation.
  - **Guest**: Show a "Login / Register" button.
  - **User**: Show the user's avatar and username, with a dropdown or button to "Logout".

## 4. Verification
- Verify that existing data remains visible when not logged in.
- Verify that creating a new user starts with an empty portfolio.
- Verify that switching users loads the correct portfolio data.
